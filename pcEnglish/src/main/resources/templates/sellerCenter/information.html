<@override name="title">
Basic information
</@override>

<@override name="css">


</@override>
<@override name="body">
    <div id="sale_center">
        <div class="sale_aside">
            <!--引入左边菜单-->
            <#include "/sellerCenter/common/seller.menu.html"/>
        <div class="sale_con">
            <ol class="am-breadcrumb" id="subtitle">
                <li><a href="/sellerCenter/toIndex">Seller's workbench</a></li>
                <li><a href="/sellerCenter/toSellerCenter">Basic information</a></li>
            </ol>
            <div data-am-widget="tabs" class="am-tabs am-tabs-d2">
                <ul class="am-tabs-nav am-cf">
                    <li class="am-active"><a href="[data-tab-panel-0]">Contact information</a></li>
                    <li class=""><a href="[data-tab-panel-1]">Company information</a></li>

                </ul>
                <div class="am-tabs-bd">
                    <div data-tab-panel-0 class="am-tab-panel am-active sale_down" id="userInformation">
                        <div class="sale_cloum1">
                            <span class="am-u-sm-2 row1">Contact name：</span>
                            <span class="am-u-sm-10 row2">
                                <span>${(userInfo.userName)!"No real name filled in"}</span>&nbsp;&nbsp;&nbsp;&nbsp;
                            </span>
                        </div>
                        <div class="sale_cloum1">
                            <span class="am-u-sm-2 row1">Contact Phone：</span>
                            <span class="am-u-sm-10 row2">
                                <span>${(userInfo.phone)!"No bound phone number"}</span>&nbsp;&nbsp;&nbsp;&nbsp;
                            </span>
                        </div>
                        <div class="sale_cloum1">
                            <span class="am-u-sm-2 row1">Contact email：</span>
                            <span class="am-u-sm-10 row2">
                                <span>${(userInfo.email)!"No bound mailbox"}</span>&nbsp;&nbsp;&nbsp;&nbsp;
                            </span>
                        </div>
                         <button type="button" onclick="updateInformation()" class="am-btn am-btn-secondary am-btn-lg button-size">Modify</button>
                    </div>
                    <div data-tab-panel-1 class="am-tab-panel " >
                        <div data-am-widget="tabs" class="am-tabs am-tabs-d2">
                            <div class="am-tabs-bd">
                                <div data-tab-panel-0 class="am-tab-panel am-active sale_down">
                                    <div class="sale_cloum1" >
                                        <span class="am-u-sm-2 row1">Company name：</span>
                                        <span class="am-u-sm-10 row2" id="companyName">

                                            <span >${(userInfo.companyDto.compName)!"No name information"}</span>&nbsp;&nbsp;&nbsp;&nbsp;
                                         </span>
                                    </div>
                                    <div class="sale_cloum1" >
                                        <span class="am-u-sm-2 row1">Company Profile：</span>
                                        <span class="am-u-sm-10 row2" id="companyInfo">
                                            <textarea class="" rows="1" id="doc-ta-1" style="border: 1px solid #E6E6E6; width: 58%" readonly>${(userInfo.companyDto.companyInfo)!"No briefing information"}</textarea>
                                         </span>
                                    </div>
                                    <div class="sale_cloum1" >
                                        <span class="am-u-sm-2 row1">Detailed address：</span>
                                        <span class="am-u-sm-10 row2" id="compAddress">
                                            <span >${(userInfo.companyDto.compAddress)!"No address information"}</span>&nbsp;&nbsp;&nbsp;&nbsp;
                                         </span>
                                    </div>
                                    <div class="sale_cloum1" >
                                        <span class="am-u-sm-2 row1">Longitude：</span>
                                        <span class="am-u-sm-10 row2" id="longitude">
                                            <span >${(userInfo.companyDto.longitude)?default("No longitude information")}</span>&nbsp;&nbsp;&nbsp;&nbsp;
                                         </span>
                                    </div>
                                    <div class="sale_cloum1" >
                                        <span class="am-u-sm-2 row1">Latitude：</span>
                                        <span class="am-u-sm-10 row2" id="latitude">
                                            <span >${(userInfo.companyDto.latitude)!"No latitude information"}</span>&nbsp;&nbsp;&nbsp;&nbsp;
                                         </span>
                                    </div>
                                    <div class="sale_cloum1" >
                                        <span class="am-u-sm-2 row1">Bank card number：</span>
                                        <span class="am-u-sm-10 row2" id="bankNumber">
                                            <span >${(userInfo.companyDto.bankNumber)!"No bank card number information"}</span>&nbsp;&nbsp;&nbsp;&nbsp;
                                         </span>
                                    </div>
                                    <div class="sale_cloum1" >
                                        <span class="am-u-sm-2 row1">Open a bank：</span>
                                        <span class="am-u-sm-10 row2" id="bank">
                                            <span >${(userInfo.companyDto.bank)!"No bank information."}</span>&nbsp;&nbsp;&nbsp;&nbsp;
                                         </span>
                                    </div>
                                    <div class="sale_cloum1">
                                        <span class="am-u-sm-2 row1">ID photo：</span>
                                        <div class="am-form-group am-u-sm-10 row2" style="width: 50%; float: left">
                                            <span ><img class="sale_pic1" src='${(userInfo.idCardUrl)!""}' alt="No ID information"></span>
                                            <span ><img class="sale_pic2" src='${(userInfo.rIdCardUrl)!""}' alt="No ID information"></span>
                                        </div>
                                    </div>
                                    <div class="sale_cloum1">
                                        <span class="am-u-sm-2 row1">License：</span>
                                        <div class="am-form-group am-u-sm-10 row2" style="width: 50%; float: left">
                                            <span  ><img class="sale_pic3" src='${(userInfo.companyDto.compUrls)!"No ID information"}'></span>
                                        </div>
                                    </div>
                                    <a id="buttonUp"><button type="button" onclick="toUpdateCompany()" class="am-btn am-btn-secondary am-btn-lg button-size">Modify</button></a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

</@override>


<@override name="js">
<script type="text/javascript">
    function toUpdateCompany() {
        $.ajax({
            url: '/sellerCenter/toUpdateCompany',
            type: 'post',
            success:function (data) {
                $("#subtitle").empty();
                var subtitleContent = '<li><a href="/sellerCenter/toIndex">Seller\'s workbench</a></li>\n' +
                    '                <li><a href="/sellerCenter/toSellerCenter">Basic information</a></li>\n' +
                    '                <li class="am-active"><a href="#">Modifying company information</a></li>';
                $("#subtitle").append(subtitleContent);
                $("#companyName").empty();
                $("#companyInfo").empty();
                $("#compAddress").empty();
                $("#latitude").empty();
                $("#longitude").empty();
                $("#bank").empty();
                $("#bankNumber").empty();
                $("#buttonUp").empty();

                $("#companyName").append('<input type="text" id="name1" class="am-form-field" value='+data.companyDto.compName+' style="width: 200px">');
                $("#companyInfo").append('<textarea class="" rows="1" id="name2" style="border: 1px solid #E6E6E6; width: 58%" ></textarea>' );
                $("#compAddress").append('<input type="text" id="name3" class="am-form-field" value='+data.companyDto.compAddress+' style="width: 200px">');
                $("#latitude").append('<input type="text" id="name4" class="am-form-field" value='+data.companyDto.latitude+' style="width: 200px">' );
                $("#longitude").append('<input type="text" id="name5" class="am-form-field" value='+data.companyDto.longitude+' style="width: 200px">' );
                $("#bank").append('<input type="text" id="name6" class="am-form-field" value='+data.companyDto.bank+' style="width: 200px">' );
                $("#bankNumber").append('<input type="text" id="name7" class="am-form-field" value='+data.companyDto.bankNumber+' style="width: 200px">' );

                $("#name2").val(data.companyDto.companyInfo);
                $("#buttonUp").append('<button type="button" onclick="updateCompany()" class="am-btn am-btn-secondary am-btn-lg button-size">Save</button>');

            },
            error:function () {
                alert("Request sent failed");
            }
        });
    }
    function updateCompany() {
        var data = {
            compName:$("#name1").val(),
            companyInfo:$("#name2").val(),
            compAddress:$("#name3").val(),
            latitude:$("#name4").val(),
            longitude:$("#name5").val(),
            bank:$("#name6").val(),
            bankNumber:$("#name7").val(),
        };
        $.ajax({
            url: '/sellerCenter/updateCompany',
            type: 'post',
            data:JSON.stringify(data),
            contentType:"application/json",
            success:function (data) {
                if(data.success){
                    alert("The modification was successful");
                    window.location.href = '/sellerCenter/toSellerCenter';
                }
            },
            error:function () {
                alert("Modification request sent failed");
            }
        });
    }

function updateInformation() {
    $.ajax({
        url: '/sellerCenter/toUpdate',
        type: 'post',
        success: function (data) {
            $("#subtitle").empty();
            var subtitleContent = '<li><a href="/sellerCenter/toIndex">Seller\'s workbench</a></li>\n' +
                '                <li><a href="/sellerCenter/toSellerCenter">Basic information</a></li>\n' +
                '                <li class="am-active"><a href="#">Modify contact information</a></li>';
            $("#subtitle").append(subtitleContent);

            $("#userInformation").empty();
            var userInformation = '<div class="sale_cloum1">\n' +
                '                            <span class="am-u-sm-2 row1">Contact name：</span>\n' +
                '                            <span class="am-u-sm-10 row2">\n' +
                '                                <input type="text" id="username" class="am-form-field" value='+data.userName+' style="width: 200px">\n' +
                '                            </span>\n' +
                '                        </div>\n' +
                '                        <div class="sale_cloum1">\n' +
                '                            <span class="am-u-sm-2 row1">Contact Phone：</span>\n' +
                '                            <span class="am-u-sm-10 row2">\n' +
                '                                <input type="text" id="userPhone" class="am-form-field" value='+data.phone+' style="width: 200px">\n' +
                '                            </span>\n' +
                '                        </div>\n' +
                '                        <div class="sale_cloum1">\n' +
                '                            <span class="am-u-sm-2 row1">Contact email：</span>\n' +
                '                            <span class="am-u-sm-10 row2">\n' +
                '                                <input type="text" id="userEmail" class="am-form-field" value='+(data.email)+' style="width: 200px">\n' +
                '                            </span>\n' +
                '                        </div>\n' +
                '                        <button type="button" onclick="saveInformation()" class="am-btn am-btn-secondary am-btn-lg button-size">Save</button>';
            $("#userInformation").append(userInformation);
        },
        error:function () {
            alert("Failed to obtain personal information！")
        }
    });
}

function saveInformation() {
    var data = {
        userName:$("#username").val(),
        phone:$("#userPhone").val(),
        email:$("#userEmail").val(),
    };
    $.ajax({
        url: '/sellerCenter/updateInformation',
        type: 'post',
        data:JSON.stringify(data),
        contentType:"application/json",
        success: function (data) {
            if(data.success){
                alert("The modification was successful");
                window.location.href = '/sellerCenter/toSellerCenter';
            }
        },
        error:function () {
            alert("Failed to modify information request sent");
        }
    });
}

</script>
</@override>
<@extends name="/common/layout/base.sellerCenter.html"/>

